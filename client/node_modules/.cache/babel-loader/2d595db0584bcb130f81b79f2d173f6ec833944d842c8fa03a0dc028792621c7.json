{"ast":null,"code":"import\"./home.css\";import React,{useEffect,useState,useRef}from\"react\";import{useGetUserID}from\"../hooks/useGetUserID\";import axios from\"axios\";import{useCookies}from\"react-cookie\";import{motion}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Home=()=>{const[recipes,setRecipes]=useState([]);// keep track of all the recipes existing in database\nconst[savedRecipes,setSavedRecipes]=useState([]);const[cookies,_]=useCookies([\"access_token\"]);const userID=useGetUserID();useEffect(()=>{const fetchRecipes=async()=>{try{const response=await axios.get(\"https://server-recipe-app-copy.onrender.com/recipes\");setRecipes(response.data);}catch(err){console.log(err);}};const fetchSavedRecipes=async()=>{try{const response=await axios.get(\"https://server-recipe-app-copy.onrender.com/recipes/savedRecipes/ids/\".concat(userID));setSavedRecipes(response.data.savedRecipes);}catch(err){console.log(err);}};fetchRecipes();if(cookies.access_token)fetchSavedRecipes();},[]);const saveRecipe=async recipeID=>{try{const response=await axios.put(\"https://server-recipe-app-copy.onrender.com/recipes\",{recipeID,userID},{headers:{authorization:cookies.access_token}});setSavedRecipes(response.data.savedRecipes);}catch(err){console.log(err);}};const isRecipeSaved=id=>savedRecipes.includes(id);return/*#__PURE__*/_jsxs(\"div\",{className:\"recipe-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"recipe-cat-heading\",children:\"Recipes\"}),/*#__PURE__*/_jsx(\"ul\",{children:recipes.map(recipe=>/*#__PURE__*/_jsxs(motion.li,{initial:{opacity:0.3},whileInView:{opacity:1},viewport:{once:true},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{className:\"recipe-title\",children:recipe.name})}),/*#__PURE__*/_jsx(\"img\",{src:recipe.imageUrl,alt:recipe.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"cookingTime\",children:[\"Cooking Time: \",recipe.cookingTime,\" minutes\"]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Ingredients\"}),/*#__PURE__*/_jsx(\"p\",{className:\"recipe-ingredients\",children:recipe.ingredients}),/*#__PURE__*/_jsx(\"h3\",{children:\"Method\"}),/*#__PURE__*/_jsx(\"p\",{className:\"recipe-instructions\",id:\"method\",children:recipe.instructions})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveRecipe(recipe._id),disabled:isRecipeSaved(recipe._id),className:\"saveButton\",children:isRecipeSaved(recipe._id)?\"Saved\":\"Save\"})]},recipe._id))})]});};","map":{"version":3,"names":["React","useEffect","useState","useRef","useGetUserID","axios","useCookies","motion","jsx","_jsx","jsxs","_jsxs","Home","recipes","setRecipes","savedRecipes","setSavedRecipes","cookies","_","userID","fetchRecipes","response","get","data","err","console","log","fetchSavedRecipes","concat","access_token","saveRecipe","recipeID","put","headers","authorization","isRecipeSaved","id","includes","className","children","map","recipe","li","initial","opacity","whileInView","viewport","once","name","src","imageUrl","alt","cookingTime","ingredients","instructions","onClick","_id","disabled"],"sources":["/Users/chanchinghei/Desktop/三大叔智商税/Web Development/repo-clones/food/recipe-app-copy/client/src/pages/home.js"],"sourcesContent":["import \"./home.css\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useGetUserID } from \"../hooks/useGetUserID\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\nimport { motion } from \"framer-motion\";\n\nexport const Home = () => {\n  const [recipes, setRecipes] = useState([]); // keep track of all the recipes existing in database\n  const [savedRecipes, setSavedRecipes] = useState([]);\n  const [cookies, _] = useCookies([\"access_token\"]);\n  const userID = useGetUserID();\n\n  useEffect(() => {\n    const fetchRecipes = async () => {\n      try {\n        const response = await axios.get(\n          \"https://server-recipe-app-copy.onrender.com/recipes\"\n        );\n        setRecipes(response.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    const fetchSavedRecipes = async () => {\n      try {\n        const response = await axios.get(\n          `https://server-recipe-app-copy.onrender.com/recipes/savedRecipes/ids/${userID}`\n        );\n        setSavedRecipes(response.data.savedRecipes);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    fetchRecipes();\n\n    if (cookies.access_token) fetchSavedRecipes();\n  }, []);\n\n  const saveRecipe = async (recipeID) => {\n    try {\n      const response = await axios.put(\n        \"https://server-recipe-app-copy.onrender.com/recipes\",\n        {\n          recipeID,\n          userID,\n        },\n        {\n          headers: { authorization: cookies.access_token },\n        }\n      );\n      setSavedRecipes(response.data.savedRecipes);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const isRecipeSaved = (id) => savedRecipes.includes(id);\n\n  return (\n    <div className=\"recipe-container\">\n      <h1 className=\"recipe-cat-heading\">Recipes</h1>\n      <ul>\n        {recipes.map((recipe) => (\n          <motion.li\n            initial={{ opacity: 0.3 }}\n            whileInView={{ opacity: 1 }}\n            viewport={{ once: true }}\n            key={recipe._id}\n          >\n            <div>\n              <h2 className=\"recipe-title\">{recipe.name}</h2>\n            </div>\n            <img src={recipe.imageUrl} alt={recipe.name} />\n\n            <div className=\"instructions\">\n              <p className=\"cookingTime\">\n                Cooking Time: {recipe.cookingTime} minutes\n              </p>\n              <h3>Ingredients</h3>\n\n              <p className=\"recipe-ingredients\">{recipe.ingredients}</p>\n              <h3>Method</h3>\n\n              <p className=\"recipe-instructions\" id=\"method\">\n                {recipe.instructions}\n              </p>\n            </div>\n\n            <button\n              onClick={() => saveRecipe(recipe._id)}\n              disabled={isRecipeSaved(recipe._id)}\n              className=\"saveButton\"\n            >\n              {isRecipeSaved(recipe._id) ? \"Saved\" : \"Save\"}\n            </button>\n          </motion.li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}