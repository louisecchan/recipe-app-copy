{"ast":null,"code":"import _objectSpread from\"/Users/chanchinghei/Desktop/\\u4E09\\u5927\\u53D4\\u667A\\u5546\\u7A0E/Web Development/repo-clones/food/recipe-app-copy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import\"./create-recipe.scss\";import React,{useState}from\"react\";import axios from\"axios\";import{useGetUserID}from\"../hooks/useGetUserID\";import{useNavigate}from\"react-router-dom\";import{useCookies}from\"react-cookie\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CreateRecipe=()=>{const userID=useGetUserID();const[cookies,_]=useCookies([\"access_token\"]);const[recipe,setRecipe]=useState({name:\"\",description:\"\",ingredients:[],// array\ninstructions:\"\",imageUrl:\"\",cookingTime:0,userOwner:userID});const[newIngredientIndex,setNewIngredientIndex]=useState(null);// New state to track the index of the newly added ingredient\nconst navigate=useNavigate();const handleChange=event=>{const{name,value}=event.target;setRecipe(_objectSpread(_objectSpread({},recipe),{},{[name]:value}));};const handleIngredientChange=(event,index)=>{const{value}=event.target;const ingredients=[...recipe.ingredients];// a replica of current ingredients list\ningredients[index]=value;setRecipe(_objectSpread(_objectSpread({},recipe),{},{ingredients}));};const handleAddIngredient=()=>{const ingredients=[...recipe.ingredients,\"\"];setRecipe(_objectSpread(_objectSpread({},recipe),{},{ingredients}));// setting the recipe object to be the same as before, whatever came after the comma will have changes, i.e. change to the ingredients field\nsetNewIngredientIndex(ingredients.length-1);// Set the index of the new ingredient to apply animation\nsetTimeout(()=>setNewIngredientIndex(null),500);// Clear the animation class after 500ms\n};const handleSubmit=async event=>{event.preventDefault();// prevent page refreshing every time I hit submit button\ntry{await axios.post(\"https://server-recipe-app-copy.onrender.com/recipes\",_objectSpread({},recipe),{headers:{authorization:cookies.access_token}});alert(\"Recipe Created\");navigate(\"/\");// redirect to home page\n}catch(error){console.error(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-recipe slide-up-fade-in\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create a Recipe\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:recipe.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:recipe.description,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ingredients\",children:\"Ingredients\"}),recipe.ingredients.map((ingredient,index)=>/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"ingredients\",name:\"ingredients\",value:ingredient,onChange:event=>handleIngredientChange(event,index),className:newIngredientIndex===index?\"pop-jiggle\":\"\"// Apply animation class if the index matches\n},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cr1-button fill\",onClick:handleAddIngredient,children:\"Add Ingredient\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"instructions\",children:\"Instructions\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"instructions\",name:\"instructions\",value:recipe.instructions,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageUrl\",children:\"Image URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"imageUrl\",name:\"imageUrl\",value:recipe.imageUrl,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cookingTime\",children:\"Cooking Time (minutes)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"cookingTime\",name:\"cookingTime\",value:recipe.cookingTime,onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"nav__link\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"cr2-button fill nav__link--text\",\"data-splitting\":true,children:\"Abracadabra!\"})})]})]});};","map":{"version":3,"names":["React","useState","axios","useGetUserID","useNavigate","useCookies","jsx","_jsx","jsxs","_jsxs","CreateRecipe","userID","cookies","_","recipe","setRecipe","name","description","ingredients","instructions","imageUrl","cookingTime","userOwner","newIngredientIndex","setNewIngredientIndex","navigate","handleChange","event","value","target","_objectSpread","handleIngredientChange","index","handleAddIngredient","length","setTimeout","handleSubmit","preventDefault","post","headers","authorization","access_token","alert","error","console","className","children","onSubmit","htmlFor","type","id","onChange","map","ingredient","onClick"],"sources":["/Users/chanchinghei/Desktop/三大叔智商税/Web Development/repo-clones/food/recipe-app-copy/client/src/pages/create-recipe.js"],"sourcesContent":["import \"./create-recipe.scss\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useGetUserID } from \"../hooks/useGetUserID\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\n\nexport const CreateRecipe = () => {\n  const userID = useGetUserID();\n  const [cookies, _] = useCookies([\"access_token\"]);\n  const [recipe, setRecipe] = useState({\n    name: \"\",\n    description: \"\",\n    ingredients: [], // array\n    instructions: \"\",\n    imageUrl: \"\",\n    cookingTime: 0,\n    userOwner: userID,\n  });\n  const [newIngredientIndex, setNewIngredientIndex] = useState(null); // New state to track the index of the newly added ingredient\n\n  const navigate = useNavigate();\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setRecipe({ ...recipe, [name]: value });\n  };\n\n  const handleIngredientChange = (event, index) => {\n    const { value } = event.target;\n    const ingredients = [...recipe.ingredients]; // a replica of current ingredients list\n    ingredients[index] = value;\n    setRecipe({ ...recipe, ingredients });\n  };\n\n  const handleAddIngredient = () => {\n    const ingredients = [...recipe.ingredients, \"\"];\n    setRecipe({ ...recipe, ingredients });\n    // setting the recipe object to be the same as before, whatever came after the comma will have changes, i.e. change to the ingredients field\n    setNewIngredientIndex(ingredients.length - 1); // Set the index of the new ingredient to apply animation\n    setTimeout(() => setNewIngredientIndex(null), 500); // Clear the animation class after 500ms\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault(); // prevent page refreshing every time I hit submit button\n\n    try {\n      await axios.post(\n        \"https://server-recipe-app-copy.onrender.com/recipes\",\n        { ...recipe },\n        {\n          headers: { authorization: cookies.access_token },\n        }\n      );\n\n      alert(\"Recipe Created\");\n      navigate(\"/\"); // redirect to home page\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className=\"create-recipe slide-up-fade-in\">\n      <h2>Create a Recipe</h2>\n      <form onSubmit={handleSubmit}>\n        <label htmlFor=\"name\">Name</label>\n        <input\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          value={recipe.name}\n          onChange={handleChange}\n        />\n        <label htmlFor=\"description\">Description</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          value={recipe.description}\n          onChange={handleChange}\n        ></textarea>\n        <label htmlFor=\"ingredients\">Ingredients</label>\n        {recipe.ingredients.map((ingredient, index) => (\n          <input\n            key={index}\n            type=\"text\"\n            id=\"ingredients\"\n            name=\"ingredients\"\n            value={ingredient}\n            onChange={(event) => handleIngredientChange(event, index)}\n            className={newIngredientIndex === index ? \"pop-jiggle\" : \"\"} // Apply animation class if the index matches\n          />\n        ))}\n        <button\n          type=\"button\"\n          className=\"cr1-button fill\"\n          onClick={handleAddIngredient}\n        >\n          Add Ingredient\n        </button>\n        <label htmlFor=\"instructions\">Instructions</label>\n        <textarea\n          id=\"instructions\"\n          name=\"instructions\"\n          value={recipe.instructions}\n          onChange={handleChange}\n        ></textarea>\n        <label htmlFor=\"imageUrl\">Image URL</label>\n        <input\n          type=\"text\"\n          id=\"imageUrl\"\n          name=\"imageUrl\"\n          value={recipe.imageUrl}\n          onChange={handleChange}\n        />\n        <label htmlFor=\"cookingTime\">Cooking Time (minutes)</label>\n        <input\n          type=\"number\"\n          id=\"cookingTime\"\n          name=\"cookingTime\"\n          value={recipe.cookingTime}\n          onChange={handleChange}\n        />\n        <div className=\"nav__link\">\n          <button\n            type=\"submit\"\n            className=\"cr2-button fill nav__link--text\"\n            data-splitting\n          >\n            Abracadabra!\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n"],"mappings":"6MAAA,MAAO,sBAAsB,CAC7B,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,uBAAuB,CACpD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,UAAU,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1C,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CAChC,KAAM,CAAAC,MAAM,CAAGR,YAAY,CAAC,CAAC,CAC7B,KAAM,CAACS,OAAO,CAAEC,CAAC,CAAC,CAAGR,UAAU,CAAC,CAAC,cAAc,CAAC,CAAC,CACjD,KAAM,CAACS,MAAM,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,CACnCe,IAAI,CAAE,EAAE,CACRC,WAAW,CAAE,EAAE,CACfC,WAAW,CAAE,EAAE,CAAE;AACjBC,YAAY,CAAE,EAAE,CAChBC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,CAAC,CACdC,SAAS,CAAEX,MACb,CAAC,CAAC,CACF,KAAM,CAACY,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAEpE,KAAM,CAAAwB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAsB,YAAY,CAAIC,KAAK,EAAK,CAC9B,KAAM,CAAEX,IAAI,CAAEY,KAAM,CAAC,CAAGD,KAAK,CAACE,MAAM,CACpCd,SAAS,CAAAe,aAAA,CAAAA,aAAA,IAAMhB,MAAM,MAAE,CAACE,IAAI,EAAGY,KAAK,EAAE,CAAC,CACzC,CAAC,CAED,KAAM,CAAAG,sBAAsB,CAAGA,CAACJ,KAAK,CAAEK,KAAK,GAAK,CAC/C,KAAM,CAAEJ,KAAM,CAAC,CAAGD,KAAK,CAACE,MAAM,CAC9B,KAAM,CAAAX,WAAW,CAAG,CAAC,GAAGJ,MAAM,CAACI,WAAW,CAAC,CAAE;AAC7CA,WAAW,CAACc,KAAK,CAAC,CAAGJ,KAAK,CAC1Bb,SAAS,CAAAe,aAAA,CAAAA,aAAA,IAAMhB,MAAM,MAAEI,WAAW,EAAE,CAAC,CACvC,CAAC,CAED,KAAM,CAAAe,mBAAmB,CAAGA,CAAA,GAAM,CAChC,KAAM,CAAAf,WAAW,CAAG,CAAC,GAAGJ,MAAM,CAACI,WAAW,CAAE,EAAE,CAAC,CAC/CH,SAAS,CAAAe,aAAA,CAAAA,aAAA,IAAMhB,MAAM,MAAEI,WAAW,EAAE,CAAC,CACrC;AACAM,qBAAqB,CAACN,WAAW,CAACgB,MAAM,CAAG,CAAC,CAAC,CAAE;AAC/CC,UAAU,CAAC,IAAMX,qBAAqB,CAAC,IAAI,CAAC,CAAE,GAAG,CAAC,CAAE;AACtD,CAAC,CAED,KAAM,CAAAY,YAAY,CAAG,KAAO,CAAAT,KAAK,EAAK,CACpCA,KAAK,CAACU,cAAc,CAAC,CAAC,CAAE;AAExB,GAAI,CACF,KAAM,CAAAnC,KAAK,CAACoC,IAAI,CACd,qDAAqD,CAAAR,aAAA,IAChDhB,MAAM,EACX,CACEyB,OAAO,CAAE,CAAEC,aAAa,CAAE5B,OAAO,CAAC6B,YAAa,CACjD,CACF,CAAC,CAEDC,KAAK,CAAC,gBAAgB,CAAC,CACvBjB,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAAC,CAED,mBACElC,KAAA,QAAKoC,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7CvC,IAAA,OAAAuC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBrC,KAAA,SAAMsC,QAAQ,CAAEX,YAAa,CAAAU,QAAA,eAC3BvC,IAAA,UAAOyC,OAAO,CAAC,MAAM,CAAAF,QAAA,CAAC,MAAI,CAAO,CAAC,cAClCvC,IAAA,UACE0C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,MAAM,CACTlC,IAAI,CAAC,MAAM,CACXY,KAAK,CAAEd,MAAM,CAACE,IAAK,CACnBmC,QAAQ,CAAEzB,YAAa,CACxB,CAAC,cACFnB,IAAA,UAAOyC,OAAO,CAAC,aAAa,CAAAF,QAAA,CAAC,aAAW,CAAO,CAAC,cAChDvC,IAAA,aACE2C,EAAE,CAAC,aAAa,CAChBlC,IAAI,CAAC,aAAa,CAClBY,KAAK,CAAEd,MAAM,CAACG,WAAY,CAC1BkC,QAAQ,CAAEzB,YAAa,CACd,CAAC,cACZnB,IAAA,UAAOyC,OAAO,CAAC,aAAa,CAAAF,QAAA,CAAC,aAAW,CAAO,CAAC,CAC/ChC,MAAM,CAACI,WAAW,CAACkC,GAAG,CAAC,CAACC,UAAU,CAAErB,KAAK,gBACxCzB,IAAA,UAEE0C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,aAAa,CAChBlC,IAAI,CAAC,aAAa,CAClBY,KAAK,CAAEyB,UAAW,CAClBF,QAAQ,CAAGxB,KAAK,EAAKI,sBAAsB,CAACJ,KAAK,CAAEK,KAAK,CAAE,CAC1Da,SAAS,CAAEtB,kBAAkB,GAAKS,KAAK,CAAG,YAAY,CAAG,EAAI;AAAA,EANxDA,KAON,CACF,CAAC,cACFzB,IAAA,WACE0C,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,iBAAiB,CAC3BS,OAAO,CAAErB,mBAAoB,CAAAa,QAAA,CAC9B,gBAED,CAAQ,CAAC,cACTvC,IAAA,UAAOyC,OAAO,CAAC,cAAc,CAAAF,QAAA,CAAC,cAAY,CAAO,CAAC,cAClDvC,IAAA,aACE2C,EAAE,CAAC,cAAc,CACjBlC,IAAI,CAAC,cAAc,CACnBY,KAAK,CAAEd,MAAM,CAACK,YAAa,CAC3BgC,QAAQ,CAAEzB,YAAa,CACd,CAAC,cACZnB,IAAA,UAAOyC,OAAO,CAAC,UAAU,CAAAF,QAAA,CAAC,WAAS,CAAO,CAAC,cAC3CvC,IAAA,UACE0C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,UAAU,CACblC,IAAI,CAAC,UAAU,CACfY,KAAK,CAAEd,MAAM,CAACM,QAAS,CACvB+B,QAAQ,CAAEzB,YAAa,CACxB,CAAC,cACFnB,IAAA,UAAOyC,OAAO,CAAC,aAAa,CAAAF,QAAA,CAAC,wBAAsB,CAAO,CAAC,cAC3DvC,IAAA,UACE0C,IAAI,CAAC,QAAQ,CACbC,EAAE,CAAC,aAAa,CAChBlC,IAAI,CAAC,aAAa,CAClBY,KAAK,CAAEd,MAAM,CAACO,WAAY,CAC1B8B,QAAQ,CAAEzB,YAAa,CACxB,CAAC,cACFnB,IAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBvC,IAAA,WACE0C,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,iCAAiC,CAC3C,qBAAc,CAAAC,QAAA,CACf,cAED,CAAQ,CAAC,CACN,CAAC,EACF,CAAC,EACJ,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}